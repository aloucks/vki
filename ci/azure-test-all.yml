steps:
  - script: |
      cargo fmt --all -- --check
    displayName: Check formatting
  - script: |
      cargo test --no-run
    displayName: Build everything
  - script: |
      RUST_BACKTRACE=1 cargo test --lib --examples
    displayName: Run unit tests
  # Needs GPU or emulation
  - script: |
      RUST_BACKTRACE=1 cargo test --tests
    displayName: Run integration tests (disabled)
    condition: False
